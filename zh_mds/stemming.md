

[Elastic Docs](/guide/) ›[Elasticsearch Guide [8.9]](index.md) ›[Text
analysis](analysis.md) ›[Text analysis concepts](analysis-concepts.md)

[« Index and search analysis](analysis-index-search-time.md) [Token graphs
»](token-graphs.md)

##Stemming

_词干_是将单词简化为其根形式的过程。这可确保在搜索过程中单词匹配的变体。

例如，"walking"和"walked"可以词干为同一个词根："walking"。一旦词干，任何一个单词的出现都会在搜索中与另一个单词匹配。

词干提取依赖于语言，但通常涉及从单词中删除前缀和后缀。

在某些情况下，词干词的词根形式可能不是真正的词。例如，"跳跃"和"跳跃"都可以归根为"跳跃"。虽然"jumpi"不是一个真正的英语单词，但搜索并不重要;如果单词的所有变体都简化为相同的根形式，则它们将正确匹配。

### 词干筛选器

在 Elasticsearch 中，词干分析由词干分析器令牌过滤器处理。这些标记筛选器可以根据它们如何提取单词进行分类：

* 算法词干分析器，根据一组规则对单词进行词干提取 * 字典词干分析器，通过在字典中查找单词来对单词进行词干提取

由于词干提取会更改令牌，因此我们建议在索引和搜索分析期间使用相同的词干分析器令牌筛选器。

### 算法词干分析器

算法词干分析器对每个单词应用一系列规则，以将其简化为其根形式。例如，英语的算法词干分析器可能会从复数单词的末尾删除"-s"和"-es"后缀。

算法词干分析器有几个优点：

*它们几乎不需要设置，通常开箱即用。  * 它们使用很少的内存。  * 它们通常比字典词干分析器更快。

但是，大多数算法词干分析器仅更改单词的现有文本。这意味着它们可能无法很好地处理不包含其根形式的不规则单词，例如：

* "be"、"are"和"am" * "mouse"和"mouse" * "foot"和"feet"

以下令牌筛选器使用算法词干提取：

* "stemmer"，它为多种语言提供算法词干提取，其中一些语言还有其他变体。  *"kstem"，一个英语词干分析器，将算法词干提取与内置词典相结合。  * "porter_stem"，我们推荐的英语算法词干分析器。  * "snowball"，它对多种语言使用基于 Snowball 的词干提取规则。

### 词典词干

词典词干分析器在提供的词典中查找单词，将无词干单词变体替换为字典中的词干单词。

理论上，字典词干分析器非常适合：

* 词干提取不规则单词 * 区分拼写相似但在概念上不相关的单词，例如：

    * `organ` and `organization`
    * `broker` and `broken`

在实践中，算法词干分析器的性能通常优于字典词干分析器。这是因为字典词干分析器具有以下缺点：

* **字典质量** 字典词干分析器的好坏取决于它的字典。为了运行良好，这些词典必须包含大量单词，定期更新，并随着语言趋势而变化。通常，当字典可用时，它已经不完整，并且它的一些条目已经过时。

* **大小和性能** 字典词干分析器必须将字典中的所有单词、前缀和后缀加载到内存中。这可能会使用大量的内存。低质量词典在删除前缀和后缀时也可能效率较低，这可能会显着减慢词干提取过程。

您可以使用"hunspell"令牌过滤器来执行字典词干提取。

如果可用，我们建议在使用"hunspell"令牌过滤器之前尝试使用适用于您的语言的算法词干分析器。

### 控制词干

有时，词干提取可以生成拼写相似但在概念上不相关的共享词根。例如，词干分析器可以将"天空"和"滑雪"简化为同一个词根："ski"。

若要防止这种情况并更好地控制词干提取，可以使用以下标记筛选器：

* "stemmer_override"，用于定义特定令牌的词干提取规则。  * "keyword_marker"，将指定的标记标记为关键字。关键字标记不会由后续词干分析器令牌筛选器进行词干提取。  * "条件"，可用于将令牌标记为关键字，类似于"keyword_marker"过滤器。

对于内置语言分析器，还可以使用"stem_exclusion"参数指定不会进行词干提取的单词列表。

[« Index and search analysis](analysis-index-search-time.md) [Token graphs
»](token-graphs.md)
