

[Elastic Docs](/guide/) ›[Elasticsearch Guide [8.9]](index.md) ›[Release
notes](es-release-notes.md)

[« Release notes](es-release-notes.md) [Elasticsearch version 8.8.2
»](release-notes-8.8.2.md)

## 弹性搜索版本8.9.0

另请参阅 8.9 中的重大更改。

### 已知问题

* 长输入文本的问答失败。如果提供给任务的上下文比模型的max_sequence_length长，并且截断设置为无，则推理将失败，并显示消息"问答结果具有无效维度"。(问题：#97917)

### 重大变更

Aggregations

    

* 默认情况下将 TDigestState 切换为使用"HybridDigest" #96904

### 错误修正

Allocation

    

* 尝试修复延迟分配 #95921 * 修复所需余额 API 中的 NPE #97775 * 修复节点替换期间的自动扩展 #96281

Authorization

    

* 解析不带前缀查询的通配符应用程序名称 #96479(问题：#96465)

CRUD

    

* 修复更新 API 中的"retry_on_conflict"参数，使其不无限期重试 #96262 * 处理"传输更新操作#句柄更新失败重试"#97290 中的失败(问题：#97286)

集群协调

    

* 尽可能避免"getStateForMasterService" #97304 * 在发布失败时成为候选 #96490(问题：#96273) * 修复群集设置更新任务确认 #97111

数据流

    

* 接受时间戳作为根级别的对象 #97401

Geo

    

* 修复了创建空"geo_lines"时的错误 #97509(问题：#97311) * 修复时间序列geo_line以在合并地理线中包含化简阶段 #96953 (问题： #96983) * 支持字节和短作为矢量图块功能 #97619(问题：#97612)

ILM+SLM

    

* 限制我们为每个 SLM 调用存储的详细信息字段长度 #97038(问题：#96918)

Infra/CLI

    

* 在 CLI 中初始化 ES 日志记录 #97353(问题：#97350)

Infra/Core

    

* 捕获静态初始化中的最大处理器数 #97119(问题：#97088) * 将来自 cgroups2 的微秒 CPU 统计信息正确解释为 nanos #96924(问题：#96089)

Infra/Logging

    

* 添加 slf4j-nop 以防止启动警告 #95459

基础设施/休息接口

    

* 修复了"RestRequest"#96406 中的 tchar 模式

Infra/Scripting

    

* 修复了通过未知超级接口查找的无痛方法问题 #97062(问题：#97022)

Infra/Settings

    

* 启用"版本设置"#95874 的验证(问题：#95873)

采集节点

    

* 修复格式为"epoch_millis"时的"日期处理器" #95996 * 通过防御性复制输入来修复"GeoIpDownloaderStatsAction$NodeResponse"序列化 #96777(问题：#96438) * 修剪重新路由处理器 #96941 中的字段引用(问题：#96939)

机器学习

    

* 捕获推理过程中抛出的异常并报告为错误 #2542 * 修复了"WordPiece"标记化，其中去除重音会导致空字符串 #97354 * 提高模型下载器的健壮性 #97274 * 通过单独评估批量推理来防止高内存使用率 #2538

Mapping

    

* 解析映射时避免堆栈溢出 #95705(问题：#52098) * 修复映射解析逻辑以确定合成源处于活动状态 #97355(问题：#97320)

Ranking

    

* 修复"sub_searches"序列化错误 #97587

Recovery

    

* 从快照 #96421 恢复时立即失败(问题：#95525)

Search

    

* 当存在子聚合时，防止实例化"top_metrics" #96180(问题：#95663) * 在构建"获取子阶段处理器"之前设置新的提供程序 #97460(问题：#96284)

Snapshot/Restore

    

* 修复 blob 缓存争用/断言错误 #96458 * 修复仅从缓存 #95987 部分恢复的文件的重用/恢复字节(问题：#95970、#95994) * 修复从缓存 #97278 恢复的文件的重用/恢复字节(问题：#95994) * 重构"恢复群集状态侦听器"以使用"群集状态观察器"#96662(问题：#96425)

TSDB

    

* TSDB 索引配置错误的错误消息 #96956 (问题： #96445) * 时序 #96878 的最小分数

任务管理

    

* 改进了"运输任务操作"#96279 中的可取消性

Transform

    

* 改进即将完成的转换的报告状态 #95672

###Enhancements

Aggregations

    

* 将集群设置添加到"搜索执行上下文"以配置"TDigestExecutionHint" #96943 * 在低基数关键字字段的基数聚合中添加对动态修剪的支持 #92060 * 使 TDigestState 可配置 #96794 * 在"混合摘要"中合并大型摘要时跳过"排序摘要" #97099 * 支持在"top_hits"中检索值 #95828

Allocation

    

* 在模拟中初始化分片时考虑"预期分片大小" #95734

Analysis

    

* 创建".同义词"系统索引 #95548

Application

    

* 向搜索应用程序添加模板参数 #95674 * 块分析堆栈跟踪响应 #96340 * 性能分析] 添加状态 API [#96272 * 性能分析] 允许升级托管 ILM 策略 [#96550 * 性能分析] 为 K/V 索引引入 ILM [#96268 * 性能分析] 要求 POST 检索堆栈跟踪 [#96790 * 性能分析] 调整默认 ILM 策略 [#96516 * 搜索应用程序] 支持存储的小胡子模板中的数组 [#96197

Authentication

    

* 具有安全性的标头验证器 #95112

Authorization

    

* 将搜索 ALC 筛选器索引前缀添加到企业级搜索用户 #96885 * 确保检查应用程序权限适用于嵌套受限角色 #96970

Autoscaling

    

* 将分片解释信息添加到"反应原因"中，关于未分配的分片 #88590(问题：#85243)

DLM

    

* 为 DLM 添加自动强制合并功能 #95204 * 在_xpack/使用情况 API 中添加"data_lifecycle" #96177 * 添加"manage_data_stream_lifecycle"索引权限并扩展"view_index_metadata"以访问数据流生命周期 API #95512 * 允许数据生命周期和保留明确无效 #95979

数据流

    

* 为"logs- **-** 数据流"添加对"logs@custom"组件模板的支持 #95481(问题：#95469) * 添加 ECS 动态映射组件并将其应用于日志数据流 #96171(问题：#95538) * 调整 ECS 动态模板以支持"子对象：假" #96712 * 自动解析日志数据流中的日志事件，如果其"消息"字段包含 JSON 内容 #96083(问题： #95522) * 在"logs-*-*"数据流中将默认值"ignore_malformed"更改为"true" #95329(问题：#95224) * 如果缺少日志数据流中的文档，请设置"@timestamp"，并添加对自定义管道的支持 #95971(问题：#95537、#95551) * 更新数据流隐式时间戳"ignore_malformed"设置 #96051

Engine

    

* Translog 编写器文件的缓存修改时间 #95107 * 当分片变为搜索活动状态时触发刷新 #96321(问题：#95544)

Geo

    

* 为"GeoHashGridTiler"添加暴力方法#96863 * 资产跟踪 - 时间序列聚合中的geo_line #94954

ILM+SLM

    

* 对 GET _ilm/策略响应进行分块 #97251(问题：#96569) * 将获取生命周期 API 移动到管理线程池并使可取消 #97248(问题：#96568) * 减少等待没有追随者步骤请求索引分片统计信息 #94510

索引接口

    

* 启动时引导分析索引 #95666

基础设施/节点生命周期

    

* SIGTERM 节点关闭类型 #95430

采集节点

    

* 为丰富字段添加映射 #96056 * 摄取：通过弹性内部 API 桥接公开重新路由查询/重置 #96958

机器学习

    

* 改进了对内存限制的遵从性 #2469 * 改进了对具有长桶长度的日历循环组件的检测 #2493 * 改进了对时移的检测，例如夏令时 #2479

Mapping

    

* 允许无符号长字段使用衰减函数 #96394(问题：#89603)

Ranking

    

* 向搜索端点添加多个排名查询 #96224

Recovery

    

* 实现"启动恢复请求#getDescription" #95731

Search

    

* 添加搜索分片端点 #94534 * 不要在"提前终止异常"和"时间超出异常"中生成堆栈跟踪 #95910 * 功能/加速二进制向量解码 #96716 * 使用 Lucene 函数提高暴力矢量搜索速度 #96617 * 将搜索空闲信息包含在分片统计信息中 #95740(问题：#95727) * 将 CCS 与新的"search_shards"API 集成 #95894(问题：#93730) * 引入过滤收集器管理器 #96824 * 引入最低分数收集器管理器 #96834 * 查询常量关键字字段时跳过分片 #96161(问题：#95541) * 支持CCS最小化异步搜索中的往返行程 #96012 * 支持关键字规范化器中的patter_replace过滤器 #96588 * 支持rank_feature字段类型的null_value #95811

Security

    

* 添加"_storage"内部用户 #95694

Snapshot/Restore

    

* 减少 blob 缓存服务中的开销 获取 #96399

Stats

    

* 将"引入"信息添加到群集信息终结点 #96328(问题：#95392) * 将"脚本"信息添加到群集信息终结点 #96613(问题：#95394) * 将"thread_pool"信息添加到群集信息终结点 #96407(问题：#95393)

TSDB

    

* 功能：包括对时间序列速率聚合的单元支持 #96605(问题：#94630)

矢量搜索

    

* 在矢量搜索中利用 SIMD 硬件指令 #96453(问题：#96370)

### 新功能

Application

    

* 在行为分析中启用分析 geoip #96624

Authorization

    

* 支持将 API 密钥的访问限制为仅某些工作流 #96744

数据流

    

* 添加自动安装摄取管道并从索引模板引用它们的功能 #95782

Geo

    

* 几何简化器 #94859

ILM+SLM

    

* 增强 ILM 运行状况指示器 #96092

基础设施/节点生命周期

    

* 优雅关闭弹性搜索 #96363

Infra/Plugins

    

* 队列] 添加".fleet-secrets"系统索引 [#95625(问题：#95143)

机器学习

    

* 添加对"xlm_roberta"标记化模型的支持 #94089 * 从query_vector_builder文档中删除技术预览警告 #96735

Snapshot/Restore

    

* 将存储库限制指标添加到节点统计信息 API 响应 #96678(问题：#89385)

Stats

    

* 新的 HTTP 信息终结点 #96198(问题：#95391)

###Upgrades

基础设施/传输接口

    

* 将"传输版本"提升到第一个非发布版本号。传输协议现在独立于发布版本进行版本控制。#95286

Network

    

* 将 Netty 升级到 4.1.92 #95575 * 将 Netty 升级到 4.1.94.Final #97112

Search

    

* 将 Lucene 升级到 9.7.0 快照 #96433 * 升级到新的 lucene 快照 9.7.0-snapshot-a8602d6ef88 #96741

[« Release notes](es-release-notes.md) [Elasticsearch version 8.8.2
»](release-notes-8.8.2.md)
