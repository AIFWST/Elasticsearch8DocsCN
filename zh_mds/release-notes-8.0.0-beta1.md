

[Elastic Docs](/guide/) ›[Elasticsearch Guide [8.9]](index.md) ›[Release
notes](es-release-notes.md)

[« Elasticsearch version 8.0.0-rc1](release-notes-8.0.0-rc1.md)
[Elasticsearch version 8.0.0-alpha2 »](release-notes-8.0.0-alpha2.md)

## 弹性搜索版本8.0.0-beta1

另请参阅 8.0 中的重大更改。

### 已知问题

* 如果您使用的是机器学习，如果要升级的集群是在"7.7.0"之前首次使用的，则升级到"8.0.0-beta1"是不安全的。如果尝试此类升级，针对机器学习结果索引的筛选别名将丢失其筛选器，从而导致不同作业的机器学习异常检测结果混合。等待"8.0.0-rc1"，然后再尝试测试升级在版本"7.7.0"之前使用机器学习的群集。  * 使用"*"模式时，系统索引包含在通配符查询中。不要依赖此行为，因为系统索引将在 8.0 发行版中隐藏。如果需要访问系统索引，请指定索引名称，使用更具体的通配符，或在查询中使用"expand_wildcards"参数。  * 默认情况下，系统索引包含在所有索引的快照中，并在未指定索引时恢复。此行为是由于在快照和还原操作的隐式默认通配符 ('*') 中包含系统索引而导致的，该通配符旨在向后兼容 7.x 版本。在 8.0 中，应通过快照或恢复请求的"feature_states"参数访问所有系统索引。

### 重大变更

ILM+SLM

    

* 始终强制实施默认层首选项 #79751(问题：#76147) * 验证 ILM 策略在创建/更新时是否存在快照存储库 #78468(问题：#72957、#77657) * 默认"ENFORCE_DEFAULT_TIER_PREFERENCE"为"true" #79275(问题：#76147、#79210)

索引接口

    

* 删除冻结索引的端点 #78918(问题：#70192、#77273)

Infra/Core

    

* 删除 Joda 依赖项 #79007 * 从日期格式化程序中删除 Joda 支持 #78990

Ingest

    

* 从发行版中删除默认的 maxmind GeoIP 数据库 #78362(问题：#68920)

License

    

* 强制许可证过期 #79671

机器学习

    

* 从 API 中删除"allow_no_datafeeds"和"allow_no_jobs"参数 #80048(问题：#60732)

Packaging

    

* 需要 Java 17 才能运行 Elasticsearch #79873

###Deprecations

Authentication

    

* 弃用设置密码工具 #76902

CRUD

    

* 删除"indices_segments"_verbose_ 参数 #78451(问题：#75955)

Monitoring

    

* 为已弃用的监视设置添加弃用信息 API 条目 #78799 * 在插件初始化时自动安装监视模板 #78350 * 删除监视引入管道 #77459(问题：#50770)

### 新功能

Security

    

* 为新群集的新节点自动配置 TLS #77231(问题：#75144、#75704)

###Enhancements

Authentication

    

* 新的CLI工具为内置用户重置密码 #79709 * 升级到UnboundID LDAP SDK v6.0.2 #79332 * 自动配置"弹性"用户密码 #78306

集群协调

    

* 防止从 8.x 降级到 7.x #78586(问题：#42489、#52414) * 防止从 8.x 降级到 7.x #78638(问题：#42489、#52414)

数据流

    

* 数据流支持使用自定义路由和分区大小进行读写 #74394(问题：#74390)

ILM+SLM

    

* 注入迁移操作，而不考虑分配操作 #79090(问题：#76147)

Infra/Core

    

* 检查标准输出是否是真正的控制台 #79882 * 共享整数页、长整型页、浮点页、双精度页和字节页 #75053 * 恢复"弃用日期字段的分辨率损失 (#78921)" #79914(问题：#78921) * 向弃用信息 API 添加两个缺失的条目 API #80290(问题：#80233)

Infra/Scripting

    

* 将 nio 缓冲区添加到无痛 #79870(问题：#79867) * 恢复脚本常规缓存 #79453(问题：#62899)

Ingest

    

* 在附件处理器执行后删除二进制字段 #79172 * 改进缓存查找以减少重新计算/搜索 #77259

License

    

* 对所有许可证强制实施传输 TLS 检查 #79602(问题：#75292)

机器学习

    

* 添加推理时间配置覆盖 #78441(问题：#77799) * 优化"categorize_text"聚合的源提取 #79099 * 机器学习C++代码的 Linux 构建平台现在是运行 gcc 10.3 的 CentOS 7。#2028 * 当节点成为主节点时隐藏 ML 索引 #77416(问题：#53674)

Mapping

    

* 添加对配置 HNSW 参数的支持 #79193(问题：#78473) * 扩展"dense_vector"以支持索引向量 #78491(问题：#78473)

Monitoring

    

* 将之前删除的监控设置添加回 8.0 #78784 * 将监控插件群集警报更改为默认不安装 #79657

Packaging

    

* 允许覆盖总内存 #78750(问题：#65905)

Search

    

* 节点级别可以匹配操作 #78765 * TSDB：将时间序列信息添加到字段上限 #78790(问题：#74660) * 添加新的 kNN 搜索端点 #79013(问题：#78473) * 禁止对嵌套向量字段 #79403 进行 kNN 搜索(问题：#78473) * 确保 kNN 搜索遵循授权 #79693(问题：#78473) * 使用 mmapfs 加载 kNN 向量格式 #78724(问题：#78473) * 支持 kNN 搜索中的余弦相似性 #79500 * 节点级别可以匹配操作 #78765

Security

    

* 添加 v7 'restCompat' 以使 id 字段 #78664 的 API 密钥失效(问题：#66671) * 启动时打印注册令牌 #78293 * 安全隐式行为更改的启动检查 #76879 * 更新自动生成的凭据输出 #79755(问题：#79312) * CLI 工具，用于重新配置节点以注册 #79690(问题：#7718) * 打包安装的安全自动配置 #75144(问题：#78306) * 更新到 OpenSAML 4 #77012(问题： #71983)

Snapshot/Restore

    

* 允许列出较旧的存储库 #78244 * 优化 SLM 策略查询 #79341(问题：#79321) * 将存储库-hdfs 插件升级到 Hadoop 3 #76897

Transform

    

* 防止旧的测试版转换开始 #79712

TSDB

    

* 自动添加时间戳映射器 #79136 * 为 tsdb 创建协调节点级读取器 #79197 * 修复多版本集群中的 TSDB 收缩测试 #79940(问题：#79936) * 不允许阴影指标或维度 #79757

### 错误修正

Infra/Core

    

* 防止四舍五入时堆栈溢出 #80450

Infra/Settings

    

* 在 REST 层上更严格的"更新设置请求"解析 #79227(问题：#29268) * 设置弃用日志数据流的自动扩展副本 #79226(问题：#78991)

机器学习

    

* 为删除训练模型 API 添加超时参数 #79739(问题：#77070) * 修复了 7.13 到 7.16 的"MlMetadata"向后兼容性错误 #80041 * 调低 ML 未分配的作业通知 #79578(问题：#79270) * 将来的批注使用新的批注索引 #79006(问题：#78439)

Search

    

* 删除通配符字段中的不安全断言 #78966

Snapshot/Restore

    

* 不要在"快照分片失败"#80009(问题：#79718)中填充堆栈跟踪

###Regressions

Search

    

* 有条件地禁用数字排序优化 #78103

###Upgrades

Search

    

* 更新 Lucene 9 快照 #79701 #79138 #78548 #78286 #73324 #79461

[« Elasticsearch version 8.0.0-rc1](release-notes-8.0.0-rc1.md)
[Elasticsearch version 8.0.0-alpha2 »](release-notes-8.0.0-alpha2.md)
