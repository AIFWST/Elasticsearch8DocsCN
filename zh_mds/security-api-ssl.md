

[Elastic Docs](/guide/) ›[Elasticsearch Guide [8.9]](index.md) ›[REST
APIs](rest-apis.md) ›[Security APIs](security-api.md)

[« SAML service provider metadata API](security-api-saml-sp-metadata.md)
[Activate user profile API »](security-api-activate-user-profile.md)

## SSL证书接口

"证书"API 使您能够检索有关用于加密 Elasticsearchcluster 中通信的 X.509 证书的信息。

###Request

"获取/_ssl/证书"

###Prerequisites

* 如果启用了安全功能，则必须具有"监视"群集权限才能使用此 API。有关详细信息，请参阅安全权限。

###Description

有关如何将证书与传输层安全性 (TLS) 一起配置的详细信息，请参阅使用 TLS 加密节点间通信。

API 返回一个列表，其中包含来自所有 TLS 上下文的证书，其中包括：

* 传输和 HTTP 接口的设置 * 在身份验证领域中使用的 TLS 设置 * 远程监视导出器的 TLS 设置

该列表包括用于配置信任的证书，例如在"xpack.security.transport.ssl.truststore"和"xpack.security.transport.ssl.certificate_authorities"设置中配置的证书。它还包括用于配置服务器身份的证书，例如"xpack.security.http.ssl.keystore"和"xpack.security.http.ssl.certificate"settings。

该列表不包括来自 Java 运行时环境 (JRE) 的默认 SSLcontext 的证书，即使这些证书在 Elasticsearch 中使用。

当 PKCS#11 令牌配置为 JRE 的信任库时，API 将返回 PKCS#11 令牌中包含的所有证书，无论这些证书是否在 Elasticsearch TLS 配置中使用。

如果 Elasticsearch 配置为使用密钥库或信任库，则 API 输出将包括该存储中的所有证书，即使某些证书在集群中可能未处于活动使用状态。

### 响应正文

响应是一个对象数组，每个对象表示一个证书。每个对象中的字段为：

`path`

     (string) The path to the certificate, as configured in the `elasticsearch.yml` file. 
`format`

     (string) The format of the file. One of: `jks`, `PKCS12`, `PEM`. 
`alias`

     (string) If the path refers to a container file (a jks keystore, or a PKCS#12 file), the alias of the certificate. Otherwise, null. 
`subject_dn`

     (string) The Distinguished Name of the certificate's subject. 
`serial_number`

     (string) The hexadecimal representation of the certificate's serial number. 
`has_private_key`

     (Boolean) Indicates whether Elasticsearch has access to the private key for this certificate. 
`expiry`

     (string) The ISO formatted date of the certificate's expiry (not-after) date. 
`issuer`

     (string) The Distinguished Name of the certificate's issuer. 

###Examples

以下示例提供了有关 Elasticsearch 单节点上的证书的信息：

    
    
    GET /_ssl/certificates

API 返回以下结果：

    
    
    [
      {
        "path": "certs/elastic-certificates.p12",
        "format": "PKCS12",
        "alias": "instance",
        "subject_dn": "CN=Elastic Certificate Tool Autogenerated CA",
        "serial_number": "a20f0ee901e8f69dc633ff633e5cd5437cdb4137",
        "has_private_key": false,
        "expiry": "2021-01-15T20:42:49.000Z"
      },
      {
        "path": "certs/elastic-certificates.p12",
        "format": "PKCS12",
        "alias": "ca",
        "subject_dn": "CN=Elastic Certificate Tool Autogenerated CA",
        "serial_number": "a20f0ee901e8f69dc633ff633e5cd5437cdb4137",
        "has_private_key": false,
        "expiry": "2021-01-15T20:42:49.000Z"
      },
      {
        "path": "certs/elastic-certificates.p12",
        "format": "PKCS12",
        "alias": "instance",
        "subject_dn": "CN=instance",
        "serial_number": "fc1905e1494dc5230218d079c47a617088f84ce0",
        "has_private_key": true,
        "expiry": "2021-01-15T20:44:32.000Z"
      }
    ]

[« SAML service provider metadata API](security-api-saml-sp-metadata.md)
[Activate user profile API »](security-api-activate-user-profile.md)
