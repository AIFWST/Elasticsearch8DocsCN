

[Elastic Docs](/guide/) ›[Elasticsearch Guide [8.9]](index.md) ›[Release
notes](es-release-notes.md)

[« Elasticsearch version 8.8.1](release-notes-8.8.1.md) [Elasticsearch
version 8.7.1 »](release-notes-8.7.1.md)

## 弹性搜索版本8.8.0

另请参阅 8.8 中的重大更改。

### 错误修正

Aggregations

    

* 使用所有直方图中位数较高的位数合并两个直方图 #93704(问题：#92822)

Allocation

    

* 避免在路由表中所有分片的迭代过程中复制 #94417 * 避免重复应用"路由表"差异 #94379 * 在对账期间平衡优先级 #95454 * 修复"重新平衡仅在活动分配决策程序时"#96025 * 简化"AsyncShardFetch#getNumberOfInFlightFetches"#93632(问题：#93631)

Application

    

* 在安装管道之前检查是否存在分析事件数据流 #95621 * 行为分析] 在"批量处理器工厂"中使用具有 ent-search 源的客户端 [#95614

Authorization

    

* 修复角色转换以包含缺少的属性 #94714 * 舰队] 为"剖析-*"添加读取权限以支持符号化 [#95596

CRUD

    

* 避免在写入后刷新中出现空"位置" #95229

集群协调

    

* 在"存储心跳服务"#95351 中异步读取注册当前术语

DLM

    

* 删除滚动更新集群设置验证器 #94447 * DLM] 修复新的端点 rest-api 规范 [#95665

数据流

    

* 允许删除在"ignore_missing_component_templates"数组中指定的组件模板 #95527 * 修复了搜索已过滤和未过滤的数据流别名的问题 #95865(问题：#95786)

Distributed

    

* 在包含统计信息之前检查分片可用性 #96015(问题：#96000、#87001) * 修复"获取管道响应"平等问题 #93695

Engine

    

* 确保刷新以返回最新的提交生成 #94249

Geo

    

* 调整"有界地理六角网格提拉器#FACTOR"以防止错过命中 #96088(问题：#96057) * 修复了"geo_line"不遵守"sort_order"的错误 #94734(问题：#94733)

ILM+SLM

    

* 使用新的目标索引重试缩减采样 ILM 操作 #94965(问题：#93580) * 从生成的快照名称中删除不允许的字符 #95767(问题：#95593) * ILM] 修复迁移到层服务和迁移操作层配置 [#95934

Infra/Core

    

* 修复了"NodeEnvironment.close()"#94677 中的争用条件(问题：#94672) * 正确使用双通配符过滤排除 #94195(问题：#92632)

基础设施/休息接口

    

* 在 REST 层中添加级别参数验证 #94136(问题：#93981)

Infra/Scripting

    

* 允许在"LeafDocLookup"#93711 中低级别分页 * 在"自定义胡子工厂"中恢复"安全胡子工厂"的使用 #95557

采集节点

    

* 修复带有偏移量和后缀模式的"Grok.match()"#95003(问题：#95002) * 修复了摄取管道 API 的详细模拟中的错误 #95232

机器学习

    

* 查询模型定义元字段时，通过使用文档值避免昂贵的源解析 #95590

Mapping

    

* 调整大小期间映射更新的超时时间更长 #95221

Network

    

* 修复了结束在页面边界上写入时"回收字节流输出"损坏的问题 #95114 * 修复最大寻道限制"回收器字节流输出" #95133

Ranking

    

* 修复了使用随机生成的排名生成器的测试用例的版本控制 #95514

Search

    

* 修复"_terms_enum"显示值 #94080(问题：#94041) * 支持忽略布尔字段中格式错误的 #93239(问题：#89542) * 支持搜索模板 API 解释查询字符串参数 #94832(问题：#83363)

Snapshot/Restore

    

* 如果商店关闭，取消冷缓存预热任务 #95891(问题：#95504) * 修复存储库快照速度的默认值 0 #95854(问题：#95561) * 修复 Azure"输入流#读取"方法 #96034 * 停止在获取快照 API 中对索引进行排序 API #94890

Transform

    

* 调用侦听器以防止请求挂起 #96221 * 在目标索引创建期间，不要出现"资源已存在异常"失败 #96274 (问题： #95310) * 通过添加"allow_restricted_indices"标志修复权限检查失败 #95187 * 用于转换的辅助凭据应仅需要源和目标索引权限，而不需要转换权限 #94420 * 在"转换计划程序"中使用单调时间 #95456(问题： #95445)

###Deprecations

Allocation

    

* 弃用"cluster.routing.allocation.type" #94066

###Enhancements

Aggregations

    

* 将"键控"参数添加到筛选器 agg，允许用户获取命名筛选器的非键控存储桶 AGG #89256(问题：#83957) * 将全局序号信息添加到统计信息 API #94500 * 在聚合器中检查空存储桶时，不要创建许多"舍入.已准备好"实例date_histogram。#94649

Analysis

    

* 将同义词规则的来源添加到异常消息 #93702

Application

    

* 行为分析事件摄取调整 #95405 * 行为分析] 向事件添加地理 IP 和用户代理 [#95433 * 行为分析] 在事件中实施搜索过滤器 [#95212

Authentication

    

* 如果 SAML HTTP 元数据不可用，则节点不会失败 #92810(问题：#37608) * 对身份验证元数据序列化的精细控制 #93726

Authorization

    

* 向 TI 包转换的"kibana_system"添加权限以支持 IOC 过期 #94506(问题：#94505) * 确保检查索引权限适用于"嵌套受限角色" #95170

集群协调

    

* 改进主服务批处理队列 #92021(问题：#81626)

DLM

    

* 将发起日期添加到 DLM #95113

Engine

    

* 将基于时间的数据的合并因子增加到 32 #94134 * 降低由于超大 Translog 而写入小段的可能性 #93524(问题：#75611) * 在只读引擎中根据时间戳对段进行排序 #93576 * 对基于时间的数据使用"LogByteSizeMergePolicy"而不是"TieredMergePolicy" #92684 * 对临时文件使用 mmap #93595

Geo

    

* 允许在"geo_shape"上仅搜索文档值 #94396 * 支持在"geo_shape"字段中存储参数 #94418(问题：#83655)

Highlighting

    

* 使用"存储字段规范"加载存储字段以突出显示 #91841

ILM+SLM

    

* 基于"max_primary_shard_docs"隐式滚动更新数据流/别名 #94065(问题：#87246) * 按自然索引名称对 ILM 解释输出进行排序 #94879(问题：#94768)

索引接口

    

* 将初始公共和内部无服务器作用域添加到数据管理休息处理程序 #93990 * 带注释的无服务 API 保护 #93607

Infra/Core

    

* 允许在线程上下文存储中保留特定标头 #94680

Infra/Plugins

    

* 改进模块/插件加载日志记录消息。#93952(问题：#93881)

基础设施/传输接口

    

* 在节点信息中添加"transport_version" JSON #94669

采集节点

    

* 添加"重新路由"处理器 #76511 * 在"摄取文档"上引入重定向方法 #94000(问题：#83653) * 摄取处理器] 将"ignore_missing"参数添加到"uri_parts"摄取处理器 [#95068

机器学习

    

* 将"_meta"字段添加到数据框分析配置 #94529 * 将"embedding_size"添加到文本嵌入配置 #95176 * 包括 Pytorch 模型的模型定义安装状态 #95271 * 将 ELSER 模型下载集成到放置训练模型 API 中 #95281 * 启动、停止和推断训练模型现在可以选择使用与模型 ID 不同的部署 ID #95168 * ML] 按部署 ID 或模型 ID 获取训练的模型统计信息 [#95440

Mapping

    

* 如果适用，从字段切换到"字符串字段" #94540 * 在"ip"字段上启用"_terms_enum" #94322(问题：#89933) * 为格式错误的布尔值启用合成源 #94121 * 通过单个 Lucene 字段索引序列号 #94504 * 使用组合字段为关键字字段上的术语和文档值编制索引 #93579

Monitoring

    

* 将"event_loop_utilization"Kibana 统计信息添加到监控索引模板 #95388

Network

    

* 将请求/响应正文日志记录添加到 HTTP 跟踪器 #93133 * 避免在代理节点 #93799 中反序列化响应 * 报告每个操作的传输消息大小 #94543(问题：#88151) * 保留代理模式连接失败时的基础错误 #94998

SQL

    

* 将"通配符样/模式"添加到 QL #95357

Search

    

* 将初始公共和内部无服务器范围添加到搜索团队 REST 处理程序 #94035 * 在版本字段上启用"_terms_enum" #93839(问题：#83403) * 引入"文档解析异常"#92646(问题：#85083) * 当大小设置为 0 时利用"权重#计数" #94858 * 使用存储字段创建"源提供程序" 段线程安全 #95082 * 使用"terminate_after"时的快捷方式总命中计数 #94889 * 性能分析] 更高效地映射堆栈帧 [#94327 * 性能分析] 并行化响应处理 [#93960

Security

    

* 队列：为".fleet-actions"签名添加新映射 #93802

Snapshot/Restore

    

* 将寄存器分析添加到回购分析 API #93955 * 在群集统计信息中添加快照活动 #93680 * 在 Azure 存储库中添加对自定义终结点的支持 #94576(问题：#94537) * 失败的任务主动取消子任务 #92588(问题：#90353)

TSDB

    

* 支持在"geo_point"字段上放置"time_series_metric" #93946

Transform

    

* 将"delete_destination_index"参数添加到"删除转换 API" #94162 * 允许在转换的"目标"配置中指定目标索引别名 #94943 * 将授权失败公开为转换运行状况问题 #94724

矢量搜索

    

* 将最大矢量调光数增加到 2048 #95257

Watcher

    

* 添加观察程序 API 以更新/检索设置 #95342(问题：#92991) * 将观察程序移植到"批量处理器2" #94133

### 新功能

Application

    

* 带有模板的初始搜索应用程序搜索 API #95026 * 行为分析] 向事件数据流添加"final_pipeline" [#95198

Authentication

    

* JWT 领域的 GA 版本 #95398

CRUD

    

*新的"传输广播非促销行动"操作#93600

DLM

    

* 添加新端点以在数据流级别配置数据生命周期 #94590 * DLM 添加自动滚动更新条件 最大年龄 #94950 * "数据生命周期服务"的初始实现 #94012 * 为数据流支持索引引入_lifecycle/解释 API #94621 * 引入"index.lifecycle.prefer_ilm"设置 #95423 * DLM] 扩展模板以模拟 API 以支持包含默认值 [#94861 * DLM] 引入默认滚动更新群集设置并通过 API 公开它 [#94240

Health

    

* 添加新的"分片容量"运行状况指示器服务 #94552 * 添加到"运行状况元数据"有关"分片限制"的信息 #94116

采集节点

    

* 向编校处理器添加许可证检查 #95477

机器学习

    

* 文本扩展查询 #93694

Ranking

    

* 在搜索 API 中添加对倒数排名融合的支持 #93396

Search

    

* 添加企业级搜索模块 #94381 * 在"_search"中的"knn"子句中添加新的"相似性"字段 #94828 * 添加返回命名查询分数的功能 #94564(问题：#29606) * 实现行为分析事件摄取 API #95027

TSDB

    

* 每值使用 40、48 和 56 位进行编码 #93371 * 平展字段合成支持 #94842 * 支持平展字段作为时间序列维度字段 #95273

###Upgrades

Engine

    

* 升级到"Lucene-9.6-snapshot-dcc2154a1d3" #94955

Infra/Core

    

* 将杰克逊 xml 升级到 2.15.0 #95641

采集节点

    

* 将 tika 升级到"2.7.0" #93759

Network

    

* 升级到 Netty '4.1.89' #94179

Packaging

    

* 将 JDK 捆绑到 Java '20.0.1' #95359

Search

    

* 将 Lucene 升级到最终的 9.6.0 版本 #95967 * 升级到"lucene-9.6.0-snapshot-8a815153fbe" #94635 * 升级到"lucene-9.6.0-snapshot-f5d1e1c787c" #94494

[« Elasticsearch version 8.8.1](release-notes-8.8.1.md) [Elasticsearch
version 8.7.1 »](release-notes-8.7.1.md)
