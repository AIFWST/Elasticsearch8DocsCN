

[Elastic Docs](/guide/) ›[Elasticsearch Guide [8.9]](index.md) ›[Release
notes](es-release-notes.md)

[« Elasticsearch version 8.3.1](release-notes-8.3.1.md) [Elasticsearch
version 8.2.3 »](release-notes-8.2.3.md)

## 弹性搜索版本8.3.0

另请参阅 8.3 中的重大更改。

### 已知问题

* 当数组中的最后一个元素被过滤掉(例如使用"_source_includes")时解析请求失败。这是由于杰克逊解析器中的一个错误。在 Elasticsearch 8.6.1 中修复 (#91456)

### 错误修正

Aggregations

    

* 允许在"min_doc_count"下使用"serial_diff" #86401 * 允许存储桶路径在存储桶中指定"_count" #85720 * 修复术语聚合中字段扁平化的错误 #87392 * 修复片状"top_metrics"测试 #86582(问题：#86377) * 修复：在尝试合并正在运行的统计信息之前检查字段是否存在 #86926 * 修复：排序词聚合在顶级指标空值 #85774 * 在自动日期直方图聚合中序列化间隔 #85473

Audit

    

* 修复审核日志记录以一致地在"origin.address"中包含端口号 #86732 * 支持删除审核日志记录的忽略过滤器 #87675(问题：#68588)

Authentication

    

* 授权用户可以禁用名称相同但领域不同的用户 #86473 * 修复了清除所有领域缓存 API 时清除"lastSuccessAuthCache"的问题 #86909 (问题： #86650)

Authorization

    

* 修复通配符应用程序权限的解析 #87293

猫类应用程序接口

    

* 在"获取_cat/分片"#86601 中获取隐藏索引统计信息(问题：#84656)

CCR

    

* 当 CCR 跟随在追随者上具有关闭索引的数据流时，防止无效的数据流元数据 #87076 (问题： #87048) * 删除 CcrRepository #87235 中的一些阻塞

集群协调

    

* 为投票配置排除项 API 添加"master_timeout"支持 #86670 * 清除投票配置(不包括 API)的小修复 #87828

Discovery-Plugins

    

* 发现-gce] 修复了 FIPS 模式下传输的初始化 [#85817(问题：#85803)

Distributed

    

* 在"DesiredNode"构造期间强制执行外部 id 唯一性 #84227

Engine

    

* 在"updateCheckPoints"#87458 中的分片失败之前分叉到 WRITE 线程(问题：#87094) * 删除阻塞等待关闭在"恢复源处理程序"#86127 (问题： #85839)

Features

    

* 修复_autoGeneratedTimestamp不应设置externally_重试 IndexRequest 时出错 #86184 (问题： #83927)

Geo

    

* 修复精度为 0 的"geo_shapes"上的地理磁贴聚合 #87202(问题：#87201) * 修复数组值"geo_point"字段的"null_value" #85959 * 用于向矢量图块添加空值标签的防护 #87051 * 量化地理查询以从搜索结果中删除真正的否定 #85441(问题：#40891)

Highlighting

    

* "FastVectorHighlighter"应使用"ValueFetchers"加载源数据 #85815(问题：#75011、#84690、#82458、#80895)

ILM+SLM

    

* 使 ILM 移动到错误步骤批处理 #85565(问题：#81880)

索引接口

    

* 使"获取索引操作"可取消 #87681

基础设施/断路器

    

* 使 CBE 消息创建更强大 #87881

Infra/Core

    

* 调整突发 CPU 的 osprobe 断言 #86990 * 清理异常后的"放气压缩器" #87163 (问题： #87160) * 直接创建非主系统索引时出错 #86707 * 修复输出中的空消息 #86981 * 修复使用"过滤器输出流"而不覆盖批量写入的问题 #86304 * 隐藏升级集群中的系统索引及其别名 #87125 * 重构代码以避免 JDK 错误： JDK-8285835 #86614

Infra/Logging

    

* 暂时提供"系统属性属性源" #87149

基础设施/节点生命周期

    

* 设置验证后升级文件夹 #87319

Infra/Plugins

    

* 在 Windows #86408 上列出插件信息时使用 Windows 换行符(问题：#86352)

基础设施/休息接口

    

* 修复状态恢复前的最小节点版本 #86482

Infra/Scripting

    

* 允许使用"SemVer"语义按脚本值排序 #85990(问题：#85989、#82287) * 脚本：修复未桥接资源库的设置快捷方式 #86868 * 脚本：将白名单作为资源加载 #87539

Infra/Settings

    

* 允许删除存档索引设置 #86107

Ingest

    

* 每个管道执行一次自引用检查 #85926(问题：#85790)

Java 低级 REST 客户端

    

* 失败时不要重试客户端请求，并显示"ContentTooLargeException"#87248(问题：#86041)

License

    

* 启动基本许可证 #86272 的一致响应(问题：#86244)

机器学习

    

* 修复集群生命周期早期的 ML 任务审核员异常 #87023(问题：#87002) * 修复了具有已知子词的未知单词的"WordPiece"标记化 #87510 * 修复了"change_point"聚合的分发更改检查 #86423 * 修复了推理超时处理错误，该错误会引发意外的"空指针异常" #87533 * 从故障转移重新启动的正确逻辑 微调训练分类和回归模型的超参数 #2251 * 修复"x = NaN"的可能来源， 分布 = 类提升：：数学：：normal_distribution<..." 日志错误训练分类和回归模型 #2249 * 修复了一些影响停止优化训练分类和回归模型超参数决策的错误 #2259 * 修复"必须提供评估函数的点"日志错误训练分类和回归模型的原因 #2268 * 修复"丢弃样本 = nan，权重 = ..." 时序异常检测的日志错误 #2286

Mapping

    

* 在"copy_to"上下文中不要运行"include_in_parent"#87123(问题：#87036)

Network

    

* 关闭 #86315 时拒绝"打开连接"尝试(问题：#86249)

Recovery

    

* 如果在主故障转移后启动，则分片失败 #87451(问题：#87367)

SQL

    

* 修复 FORMAT 函数以符合 SQL Server 规范Microsoft #86225(问题：#66560) * 实现对 SQL 清除游标 #84230 的二进制格式支持(问题：#53359)

Search

    

* 将状态字段添加到多搜索模板响应 #85496(问题：#83029) * 字段 API 允许在禁用"_source"时获取值 #87267(问题：#87072) * 修复未配置的"constant_keyword"上的"_terms_enum"#86191(问题：#86187、#86267) * 修复打开时间点时的状态代码，没有"keep_alive" #87011(问题：#87003) * 处理"磁盘使用情况"API #87826 中的空点值(问题： #87761) * 确保重写协调器上的解释查询 #87013 (问题： #64281)

Security

    

* 使用户和角色名称约束与最大文档 ID 一致 #86728(问题：#66020) * 安全插件关闭可发布领域 #87429(问题：#86286)

Snapshot/Restore

    

* 完成应表示在快照状态下完全处理 #86414 * 区分丢失和无效的存储库 #85551(问题：#85550) * 从"存储恢复"调用"getRepositoryData"后分叉 #87264 (问题： #87237) * 从"存储恢复"调用"getRepositoryData"后分叉 #87254 (问题： #87237) * 在非法的"存储库数据"更新上引发异常 #87654 * 将 Azure SDK 升级到 12.16.0 #86135

Stats

    

* 在管理池上运行"传输群集信息操作" #87679

TSDB

    

* TSDB：修复time_series以收集优先级 #85526 * TSDB：修复时间序列索引搜索器中 tsidOrd 的错误初始值 #85713(问题：#85711)

Transform

    

* 修复转换"_start"权限以使用配置中存储的标头 #86802 * 转换] 修复取消设置保留策略时的错误 [#87711

###Deprecations

Authentication

    

* 不推荐使用在没有相应绑定密码的 LDAP 或活动目录 (AD) 域中配置绑定 DN #85326(问题：#47191)

###Enhancements

Aggregations

    

* 在"random_sampler"聚合中提高最小和最大性能 #85118

Authentication

    

* 支持 JWT 领域令牌中的可配置声明 #86533 * 警告由于文档或字段级安全性的许可要求而禁用的用户角色 #85393 (问题： #79207) * "令牌服务"解码 JWT，更改警告以调试 #86498

Authorization

    

* 为合成的"kibana_system"添加删除权限 #85844 * 指定索引时授权无痛执行作为索引操作 #85512(问题：#86428) * 更好的运行方式拒绝错误消息 #85501(问题：#72904) * 改进仅布尔响应的"具有权限"性能 #86685 * 放宽角色 API #86604 中角色名称的限制(问题：#86480) * Osquery] 扩展"kibana_system"角色以访问osquery_manager...[#86609

Autoscaling

    

* 在所需节点中添加对 CPU 范围的支持 #86434

集群协调

    

* 在应用器繁忙时阻止联接 #84919 * 懒惰地计算主任务批处理摘要 #86210 * 启动时记录"cluster.initial_master_nodes" #86101 * 减少联接验证的资源需求 #85380 (问题： #83204) * 在"集群形成故障助手"中报告挂起的连接 #85635 * 加快地图差异 (2) #86375

Discovery-Plugins

    

* 从发现 Azure 中删除冗余的杰克逊依赖项 #87898

Distributed

    

* 跟踪所需的节点群集成员身份 #84165

Engine

    

* 缓存不可变的 translog lastModifiedTime #82721(问题：#82720)* 根据分配的处理器增加"force_merge"线程池大小 #87082(问题：#84943) * 当max_num_segments大于 1 时，更优化的强制合并 #85065

Geo

    

* 支持 _geoJSON_ in CartesianPoint for _point_ #85442 * 支持地理标签位置作为运行时字段 #86154 * 通过 REST 矢量图块 API 支持 geo 标签位置 #86458(问题：#86044)

Health

    

* 添加对层首选项和分配筛选器冲突的基本检查 #85071 * 向运行状况 API 添加预检检查以确保可获得运行状况 #86404 * 添加有关运行状况 API 迁移层用户操作的层信息 #87486 * 运行状况 API 添加指示器文档链接 #86904(问题：#86892) * 运行状况 API 文案编辑 #87010 * 如果无法确定任何操作，则返回默认用户操作 #87079

ILM+SLM

    

* 使 ILM 和 SLM"history_index_enabled"设置动态化 #86493

索引接口

    

* 批量执行模板和管道群集状态操作 #86017

Infra/Core

    

* 为弹性代理添加标签映射 #86298 * 扩展 jar 地狱以包含模块 #86622 * 更快的获取_cluster/设置 API #86405(问题：#82342) * 通过保存流刷新加快字符串写入速度 #86114 * 队列：将"start_time"和"minimum_execution_duration"属性添加到操作 #86167 * 强制扩展安全策略的属性 #87396 * 将数组部分重构为可以序列化和 ... #85826 * 加速 IP v4 解析器 #86253 * 使用 varhandle 用于基元类型转换在更多地方 #85577(问题：#78823)

Infra/Scripting

    

* 脚本：添加对白名单中的类别名的功能 #86899

Ingest

    

* 迭代执行同步摄取处理器 #84250(问题：#84274) * 跳过"摄取服务"中的"确保无自我引用"签入 #87337

License

    

* 初始化活动领域而不记录消息 #86134(问题：#81380)

机器学习

    

* 类似于 ML 分类的文本分类聚合 #80867 * 为所有监督模型添加新的_infer端点并弃用部署推断 API #86361 * 添加新的"question_answering"NLP 任务，用于从文档中提取问题的答案 #85958 * 将开始和结束参数添加到"_preview"，并从无限预览中排除冷/冻结层 #86989 * 调整专用 ML 节点的自动 JVM 堆大小 #86399 * 替换"categorize_text"的实现聚合 #85872 * 将 PyTorch 升级到版本 1.11 #2233， #2235，https：//github.com/elastic/ml-cpp/pull/2238#2238] * 在 Windows 上将 zlib 升级到版本 1.2.12 [#2253 * 在 Linux 和 Windows 上将 libxml2 升级到版本 2.9.14 #2287 * 提高许多存储桶为空的数据的时间序列模型稳定性和异常评分一致性 #2267 * 解决实际等于典型等于零异常的根本原因 #2270 * 检测到后立即在更新中更好地处理异常值时间序列的变化 #2280

Mapping

    

* 映射器中的实习生字段名称 #86301 * 将 BYTE_BLOCK_SIZE - 2 替换为索引编写器#MAX_TERM_LENGTH #85518

Network

    

* 启动时的日志节点标识 #85773

Search

    

* GeoBoundingBox 查询应适用于纬度或经度相等的边界框 #85788(问题：#77717) * 改进了搜索 API URL 参数的错误消息 #86984(问题：#79719)

Security

    

* 添加对 OAuth2 令牌的运行方式支持 #86680 * 放宽用户 API 的用户名限制 #86398(问题：#86326) * 用户配置文件 - 添加对建议配置文件 API 的提示支持 #85890 * 用户配置文件 - 添加新的操作源和内部用户 #86026 * 用户配置文件 - 支持 HTTP 断开连接的请求取消 #86332 * 用户配置文件 - 为"hasPrivileges"检查添加缓存 #86543

Snapshot/Restore

    

* 添加参数以从响应 #86269 中排除快照中的索引(问题：#82937)

Stats

    

* 添加"io_time_in_millis"#84911 的文档

TLS

    

* 为生成的证书和 CSR 设置"服务器身份验证"扩展密钥用法 #86311(问题：#81067)

TSDB

    

* 聚合执行上下文添加时间戳提供程序 #85850

Transform

    

* 首选转换的辅助身份验证标头 #86757 * 支持转换中的"范围"聚合 #86501

### 新功能

Authorization

    

* 具有配置文件的权限 API #85898

Geo

    

* 用于地质格栅聚合的新geo_grid查询 #86596(问题：#85727)

Health

    

* 为运行状况影响添加对"impact_areas"的支持 #85830(问题：#85829) * 为分片分配操作添加故障排除指南 #87078 * 向剩余运行状况指标添加潜在影响 #86197 * 运行状况 API 向下钻取 #85234(问题：#84793) * 用于跟踪从每个节点看到的主历史记录的新服务 #85941 * 按索引优先级对影响索引名称进行排序 #85347

Mapping

    

* 为指标用例添加对字段名称中的点的支持 #86166(问题：#63530) * 合成源 #85649

SQL

    

* SQ：允许 SQL 查询中的部分结果 #85897(问题：#33148)

Search

    

* 快照作为简单存档 #86261(问题：#81210)

TSDB

    

* TSDB：对时间序列索引 #85708 实施缩减采样(问题：#69799、#65769)

###Upgrades

Infra/CLI

    

* 将 procrun 可执行文件升级到 1.3.1 #86710

Infra/Core

    

* 将杰克逊升级到 2.13.2 #86051

Ingest

    

* 升级到 tika 2.4 #86015

Network

    

* 升级到 Netty 4.1.76 #86252

Packaging

    

* 将 Iron Bank 基础映像更新为 8.6 #86796

SQL

    

* 将依赖项 - JLine - 更新到 v 3.21.0 #83767(问题：#83575)

Search

    

* 更新到公共 lucene 9.2.0 版本 #87162

Snapshot/Restore

    

* 将 GCS 插件升级到 1.118.1 #87800

[« Elasticsearch version 8.3.1](release-notes-8.3.1.md) [Elasticsearch
version 8.2.3 »](release-notes-8.2.3.md)
