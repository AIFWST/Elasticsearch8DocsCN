

[Elastic Docs](/guide/) ›[Elasticsearch Guide [8.9]](index.md) ›[Secure the
Elastic Stack](secure-cluster.md) ›[User authorization](authorization.md)

[« Role restriction](role-restriction.md) [Document level security
»](document-level-security.md)

## 安全权限

本节列出了可以分配给角色的权限。

### 群集权限

`all`

|

所有群集管理操作，如快照、节点关闭/重新启动、设置更新、重新路由或管理用户和角色。   ---|--- "cancel_task"

|

取消任务和删除异步搜索的权限。有关详细信息，请参阅删除异步搜索 API。   "create_snapshot"

|

为现有存储库创建快照的权限。还可以列出和查看有关现有存储库和快照的详细信息。   "grant_api_key"

|

代表其他用户创建 Elasticsearch API 密钥的权限。   "管理"

|

基于"监视器"构建，并添加更改群集中值的群集操作。这包括快照、更新设置和重新路由。它还包括获取快照和还原状态。此权限不包括管理安全性的能力。   "manage_api_key"

|

所有与安全相关的操作都涉及 Elasticsearch API 密钥，包括创建新的 API 密钥、检索 API 密钥信息、查询 API 密钥、更新 API 密钥、批量更新 API 密钥和使 API 密钥失效。

* 当您创建新的 API 密钥时，它们将始终归经过身份验证的用户所有。  * 当您拥有此权限时，您可以使自己的 API 密钥和其他用户拥有的密钥失效。

"manage_ccr"

|

与管理关注者索引和自动关注模式相关的所有跨集群复制操作。它还包括授予管理追随者索引和自动跟踪模式所需的权限的权限。此权限仅在包含追随者索引的集群上是必需的。   "manage_ilm"

|

与管理策略相关的所有索引生命周期管理操作。   "manage_index_templates"

|

索引模板上的所有操作。   "manage_ingest_pipelines"

|

对引入管道的所有操作。   "manage_logstash_pipelines"

|

日志存储管道上的所有操作。   "manage_ml"

|

所有机器学习操作，例如创建和删除数据馈送、作业和模型快照。

在版本 6.2 之前创建的数据馈送或在禁用安全功能时创建的数据馈送以具有提升权限(包括读取所有索引的权限)的系统用户身份运行。较新的数据馈送使用创建或更新它们的用户的安全角色运行。   "manage_oidc"

|

允许使用 Elasticsearch API(OpenID connect prepareauthentication、OpenID connect authenticate 和 OpenID connectlogout)代表其他用户发起和管理 OpenID Connect 身份验证。   "manage_own_api_key"

|

对当前经过身份验证的用户拥有的 Elasticsearch API 密钥执行的所有与安全相关的操作。这些操作包括创建新的 API 密钥、检索有关 API 密钥的信息、查询 API 密钥、更新 API 密钥、批量更新 API 密钥和使 API 密钥失效。   "manage_pipeline"

|

对引入管道的所有操作。   "manage_rollup"

|

所有汇总操作，包括创建、启动、停止和删除汇总作业。   "manage_saml"

|

支持使用内部 Elasticsearch API 代表其他用户启动和管理 SAML身份验证。   "manage_search_application"

|

搜索应用程序上的所有 CRUD 操作。   "manage_security"

|

所有与安全相关的操作，例如对用户和角色的 CRUD 操作以及缓存清除。   "manage_service_account"

|

Elasticsearch 服务账号上所有与安全相关的操作，包括获取服务账号、创建服务账号令牌、删除服务账号令牌和获取服务账号凭证。   "manage_slm"

|

所有快照生命周期管理 (SLM) 操作，包括创建和更新策略以及启动和停止 SLM。   "manage_token"

|

对由 Elasticsearch 令牌服务生成的令牌的所有与安全相关的操作。   "manage_transform"

|

与管理转换相关的所有操作。   "manage_autoscaling"

|

与管理自动缩放策略相关的所有操作。   "manage_data_frame_transforms"

|

与管理转换相关的所有操作。 [7.5] 在 7.5 中已弃用。 请改用"manage_transform"。   "manage_enrich"

|

与管理和执行扩充策略相关的所有操作。   "manage_watcher"

|

所有观察程序操作，例如放置监视、执行、激活 oracconfirm 。

在版本 6.1 之前创建的监视或在禁用安全功能时创建的监视以具有提升权限(包括读取和写入所有索引的权限)的系统用户身份运行。较新的监视使用创建或更新它们的用户的安全角色运行。   "监视器"

|

所有群集只读操作，例如群集运行状况和状态、热线程、节点信息、节点和群集统计信息以及挂起的群集任务。   "monitor_ml"

|

所有只读机器学习操作，例如获取有关数据源、作业、模型快照或结果的信息。   "monitor_rollup"

|

所有只读汇总操作，例如查看历史和当前正在运行的汇总作业的列表及其功能。   "monitor_snapshot"

|

列出和查看现有存储库和快照详细信息的权限。   "monitor_text_structure"

|

与查找结构 API 相关的所有只读操作。   "monitor_transform"

|

与转换相关的所有只读操作。   "monitor_watcher"

|

所有只读观察程序操作，例如获取监视和监视程序统计信息。   "read_ccr"

|

所有只读跨集群复制操作，例如获取有关集群中领导索引的索引和元数据的信息。它还包括检查用户是否具有遵循领导者索引的适当权限的权限。只有在包含领导者索引的集群上，才需要此权限。   "read_ilm"

|

所有只读索引生命周期管理操作，例如获取策略和检查索引生命周期管理的状态read_pipeline

|

对摄取 pipline 的只读访问(获取、模拟)。   "read_slm"

|

所有只读 SLM 操作，例如获取策略和检查 SLM 状态。   "read_security"

|

所有与安全相关的只读操作，例如获取用户、用户配置文件、Elasticsearch API 密钥、Elasticsearch 服务帐户、角色和角色映射。允许查询和检索所有 Elasticsearch API 密钥的信息。   "transport_client"

|

传输客户机连接所需的所有权限。远程群集需要启用跨群集搜索。   ### 索引权限编辑

`all`

|

对索引或数据流的任何操作。   ---|--- "auto_configure"

|

允许自动创建索引和数据流。自动创建操作是针对不存在的索引或数据流的索引或批量请求的结果，而不是显式创建索引或创建数据流请求的结果。还允许自动更新索引和数据流上的映射(如果它们与现有映射不矛盾)。自动更新映射操作是对索引或数据流的索引或批量请求的结果，该请求包含可以映射的新字段，而不是显式更新映射请求。   "创建"

|

索引文档的权限。

8.0] 在 8.0 中已弃用。 还授予使用 [更新映射API 或依赖动态字段映射来更新索引映射(但不是数据流映射)的权限。在将来的主要版本中，此权限不会授予任何映射更新权限。

此权限不会将索引操作限制为创建文档，而是将 API 使用限制为索引 API。索引 API 允许用户覆盖以前编制索引的文档。请参阅"create_doc"特权以获取替代方案。   "create_doc"

|

索引文档的权限。它不授予更新或覆盖现有文档的权限。

8.0] 在 8.0 中已弃用。 还授予使用 [更新映射API 或依赖动态字段映射来更新索引映射(但不是数据流映射)的权限。在将来的主要版本中，此权限不会授予任何映射更新权限。

此权限依赖于索引请求(索引和批量)的"op_type"。以具有"create_doc"权限(没有更高的权限，如"索引"或"写入")的用户引入文档时，必须确保通过以下方法之一将_op_type_is设置为 _create_：

* 在索引或批量 API 中显式设置"op_type" * 使用索引 API 的"_create"端点 * 使用自动生成的"_id"创建文档

"create_index"

|

创建索引或数据流的权限。创建索引请求可能包含创建后要添加到索引中的别名。在这种情况下，请求也需要索引和别名的"管理"权限。   "删除"

|

删除文档的权限。   "delete_index"

|

删除索引或数据流的权限。   "索引"

|

索引和更新文档的权限。

8.0] 在 8.0 中已弃用。 还授予使用 [更新映射API 或依赖动态字段映射来更新索引映射(但不是数据流映射)的权限。在将来的主要版本中，此权限不会授予任何映射更新权限。   "维护"

|

允许刷新、刷新、同步刷新和强制合并索引管理操作。没有读取或写入索引数据或以其他方式管理索引的权限。   "管理"

|

所有"监控"权限以及索引和数据流管理(别名、分析、缓存清除、关闭、删除、存在、刷新、映射、打开、字段功能、强制合并、刷新、设置、搜索分片、验证查询)。   "manage_follow_index"

|

管理追随者索引生命周期所需的所有操作，包括创建追随者索引、关闭追随者索引以及将其转换为非常规索引。只有在包含追随者索引的集群上，才需要此权限。   "manage_ilm"

|

与管理索引或数据流的策略执行相关的所有索引生命周期管理操作。这包括重试策略和从索引或数据流中删除策略等操作。   "manage_leader_index"

|

管理领导者索引生命周期所需的所有操作，包括忘记关注者。只有在包含领导者索引的集群上，才需要此权限。   "监视器"

|

监视所需的所有操作(恢复、区段信息、索引统计信息和状态)。   "读"

|

对操作的只读访问(计数，解释，获取，mget，获取索引脚本，更像这样，多渗透/搜索/术语向量，渗透，滚动，clear_scroll，搜索，建议，电视)。   "read_cross_cluster"

|

从远程群集对搜索操作进行只读访问。   "view_index_metadata"

|

对索引和数据流元数据(别名、存在、字段功能、字段映射、获取索引、获取数据流、ILM 解释、映射、搜索分片、设置、验证查询)的只读访问权限。此权限主要由 Kibana 用户使用。   "写"

|

对文档执行所有写入操作的权限，其中包括索引、更新和删除文档以及执行批量操作的权限，同时还允许动态更新索引映射。

8.0] 在 8.0 中已弃用。 它还授予使用 [更新映射API.这将在未来的主要版本中撤回。   ### 运行为权限编辑

"run_as"权限使经过身份验证的用户能够代表其他用户提交请求。该值可以是用户名或以逗号分隔的用户名列表。(还可以将用户指定为字符串数组或 YAML序列。有关更多信息，请参阅代表其他用户提交请求。

### 应用程序权限

应用程序权限在 Elasticsearch 中进行管理，可以使用具有权限 API 和获取应用程序权限 API 进行检索。但是，它们不会授予对 Elasticsearch 中任何操作或资源的访问权限。它们的目的是使应用程序能够在Elasticsearch角色中表示和存储自己的特权模型。

要创建应用程序权限，请使用添加应用程序权限 API。然后，您可以将这些应用程序特权与角色相关联，如定义角色中所述。

[« Role restriction](role-restriction.md) [Document level security
»](document-level-security.md)
