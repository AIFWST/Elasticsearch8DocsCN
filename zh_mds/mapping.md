

[Elastic Docs](/guide/) ›[Elasticsearch Guide [8.9]](index.md)

[« Indexing pressure](index-modules-indexing-pressure.md) [Dynamic mapping
»](dynamic-mapping.md)

#Mapping

映射是定义文档及其包含的字段的存储和索引方式的过程。

每个文档都是字段的集合，每个字段都有自己的数据类型。映射数据时，创建映射定义，其中包含与文档相关的字段列表。映射定义还包括元数据字段，如"_source"字段，用于自定义文档关联元数据的处理方式。

使用_dynamic mapping_和_explicit mapping_来定义数据。每种方法根据您在数据旅程中所处的位置提供不同的优势。例如，显式映射您不想使用默认值的字段，或者更好地控制创建哪些字段。然后，您可以允许 Elasticsearch 动态添加其他字段。

在 7.0.0 之前，映射定义包含类型名称。Elasticsearch 7.0.0 及更高版本不再接受 _default_ 映射。见mappingtypes__Removal。

**尝试映射选项**

在搜索请求中定义运行时字段以试验不同的映射选项，并通过在搜索请求期间覆盖映射中的值来修复索引映射值中的错误。

## 动态映射

动态映射允许您在刚开始时试验和探索数据。Elasticsearch会自动添加新字段，只需为文档编制索引即可。您可以将字段添加到顶级映射以及内部"对象"和"嵌套"字段。

使用动态模板定义基于匹配条件应用于动态添加字段的自定义映射。

## 显式映射

显式映射允许您精确选择如何定义映射定义，例如：

* 哪些字符串字段应被视为全文字段。  * 哪些字段包含数字、日期或地理位置。  * 日期值的格式。  * 自定义规则来控制动态添加字段的映射。

使用运行时字段在不重新编制索引的情况下进行架构更改。您可以将运行时字段与索引字段结合使用，以平衡资源使用情况和性能。您的索引会更小，但搜索性能会变慢。

## 防止映射爆炸的设置

在索引中定义过多字段可能会导致映射爆炸，这可能会导致内存不足错误和难以恢复的情况。

考虑这样一种情况：插入的每个新文档都会引入新字段，例如动态映射。每个新字段都会添加到索引映射中，随着映射的增长，这可能会成为一个问题。

使用映射限制设置可以限制字段映射(手动或动态创建)的数量，并防止文档导致映射爆炸。

[« Indexing pressure](index-modules-indexing-pressure.md) [Dynamic mapping
»](dynamic-mapping.md)
